jQuery(function(a){var b={init:function(){this.cacheElements();this.bindEvents();this.render()},cacheElements:function(){this.$textareas=a("textarea");this.$pluginTab=a("a[href=#tabsysMuramarkdown]").parent()},bindEvents:function(){this.$textareas.on("instanceReady.ckeditor",this.removeEditor)},render:function(){this.$pluginTab.hide()},removeEditor:function(c,d){var e=a("#"+d.name);d.destroy();b.setupMarkdown(e)},setupMarkdown:function(c){var d=c.attr("id"),e,f,g,h;e=a("<div></div>",{id:d+"-button-bar","class":"wmd-button-bar"});f=a("<div></div>",{id:d+"-preview","class":"wmd-preview",css:{display:"none"}});g=a("<div></div>",{id:d+"-preview-toggle","class":"wmd-preview-toggle",html:"<p>Show Preview</p>"});c.before(e).after(f).after(g).addClass("wmd-input");setup_wmd({input:d,button_bar:d+"-button-bar",preview:d+"-preview"});b.replaceHTML(c);b.setupPreviewLinks(c)},replaceHTML:function(a){var b=a.siblings(".wmd-preview").html(),c=toMarkdown(b);a.html(c);a.val(c)},setupPreviewLinks:function(a){a.siblings(".wmd-preview-toggle").on("click",b.togglePreview)},togglePreview:function(b){var c=a(this),d=c.find("p"),e=c.siblings(".wmd-preview");e.slideToggle();d.text()==="Show Preview"?d.text("Hide Preview"):d.text("Show Preview")}};return b.init()})